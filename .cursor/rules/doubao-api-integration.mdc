# è±†åŒ…APIé›†æˆæ¨¡å¼

åŸºäº`[src/utils/ai/transcription.ts](mdc:src/utils/ai/transcription.ts)`å’Œ`[src/utils/ai/doubao-client.ts](mdc:src/utils/ai/doubao-client.ts)`çš„APIé›†æˆæœ€ä½³å®è·µï¼š

## ğŸ” è®¤è¯ç®¡ç†
- **å‡­è¯è·å–**ï¼šä½¿ç”¨`[src/utils/config.ts](mdc:src/utils/config.ts)`ç»Ÿä¸€ç®¡ç†APIå‡­è¯
- **ä¼˜å…ˆçº§å¤„ç†**ï¼šRaycast preferencesä¼˜å…ˆï¼Œæœ¬åœ°é…ç½®ä½œä¸ºfallback
- **å®‰å…¨å­˜å‚¨**ï¼šæ•æ„Ÿä¿¡æ¯ä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç 

```typescript
// æ ‡å‡†çš„å‡­è¯è·å–æ¨¡å¼
export function getPreferences(): TranscriptionPreferences {
  const prefs = getPreferenceValues<TranscriptionPreferences>();
  const doubaoCredentials = getDoubaoCredentials();

  return {
    ...DEFAULT_PREFERENCES,
    ...prefs,
    doubaoAppKey: prefs.doubaoAppKey || doubaoCredentials?.appKey,
    doubaoAccessToken: prefs.doubaoAccessToken || doubaoCredentials?.accessToken,
    doubaoSecretKey: prefs.doubaoSecretKey || doubaoCredentials?.secretKey,
  };
}
```

## ğŸ™ï¸ éŸ³é¢‘å¤„ç†è§„èŒƒ
- **æ ¼å¼è¦æ±‚**ï¼šPCMæ ¼å¼ï¼Œ16kHzé‡‡æ ·ç‡ï¼Œ16ä½æ·±åº¦ï¼Œå•å£°é“
- **æ•°æ®åˆ†æ®µ**ï¼š6400å­—èŠ‚ä¸ºä¸€ä¸ªéŸ³é¢‘å—è¿›è¡Œä¼ è¾“
- **å‹ç¼©ä¼ è¾“**ï¼šä½¿ç”¨gzipå‹ç¼©å‡å°‘ç½‘ç»œä¼ è¾“é‡

## ğŸŒ WebSocketé€šä¿¡æ¨¡å¼
- **è¿æ¥ç®¡ç†**ï¼šå»ºç«‹è¿æ¥åå…ˆå‘é€é…ç½®æ¶ˆæ¯
- **æ¶ˆæ¯åè®®**ï¼šéµå¾ªè±†åŒ…APIçš„äºŒè¿›åˆ¶æ¶ˆæ¯æ ¼å¼
- **é”™è¯¯å¤„ç†**ï¼šå¤„ç†è¿æ¥æ–­å¼€å’Œé‡è¿é€»è¾‘
- **çŠ¶æ€è¿½è¸ª**ï¼šè®°å½•è¿æ¥çŠ¶æ€å’Œåºåˆ—å·

## ğŸ“Š å®æ—¶è½¬å½•å¤„ç†
- **éƒ¨åˆ†ç»“æœ**ï¼šå¤„ç†ä¸­é—´è½¬å½•ç»“æœçš„æ˜¾ç¤º
- **æœ€ç»ˆç»“æœ**ï¼šè¯†åˆ«æœ€åä¸€ä¸ªæ¶ˆæ¯åŒ…è·å–å®Œæ•´ç»“æœ
- **ç»“æœåˆå¹¶**ï¼šå°†å¤šä¸ªéƒ¨åˆ†ç»“æœåˆå¹¶ä¸ºå®Œæ•´æ–‡æœ¬

## ğŸ” è°ƒè¯•å’Œç›‘æ§
- **è¯¦ç»†æ—¥å¿—**ï¼šè®°å½•æ¯ä¸ªæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶
- **æ€§èƒ½ç›‘æ§**ï¼šè·Ÿè¸ªè½¬å½•æ—¶é—´å’Œæ•°æ®ä¼ è¾“é‡
- **é”™è¯¯è¿½è¸ª**ï¼šè®°å½•APIè°ƒç”¨å¤±è´¥çš„è¯¦ç»†ä¿¡æ¯

## âš¡ æ€§èƒ½ä¼˜åŒ–
- **è¿æ¥å¤ç”¨**ï¼šé¿å…é¢‘ç¹å»ºç«‹WebSocketè¿æ¥
- **æ•°æ®å‹ç¼©**ï¼šå¯¹éŸ³é¢‘æ•°æ®è¿›è¡Œå‹ç¼©ä¼ è¾“
- **å¼‚æ­¥å¤„ç†**ï¼šä½¿ç”¨Promiseå¤„ç†å¼‚æ­¥APIè°ƒç”¨
- **è¶…æ—¶æ§åˆ¶**ï¼šè®¾ç½®åˆç†çš„è¯·æ±‚è¶…æ—¶æ—¶é—´
